#!/usr/bin/env bash

set -e
set -u
set -o pipefail

echo "Checking OS..."
OS="$(uname -s)"

if ! command -v gdb &>/dev/null; then
    echo "GDB not found. Installing..."
    if [[ "$OS" == "Darwin" ]]; then
        brew install gdb
    elif [[ "$OS" == "Linux" ]]; then
        sudo apt update && sudo apt install -y gdb
    else
        echo "Unsupported OS: $OS" >&2
        exit 1
    fi
fi

echo "Installing GEF (GDB Enhanced Features)..."
bash -c "$(curl -fsSL https://gef.blah.cat/sh)"

echo "GEF installed successfully!"
