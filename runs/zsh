#!/usr/bin/env bash

echo "Installing Zsh and configuring Starship and plugins..."

# Install Zsh
if [[ "$(uname)" == "Darwin" ]]; then
    echo "Installing Zsh via Homebrew..."
    brew install zsh
else
    echo "Installing Zsh..."
    sudo apt update && sudo apt install -y zsh
fi

# Clear any hash cache and switch the default shell
hash -r
sudo chsh -s "$(command -v zsh)"
zsh

# Install Starship prompt
curl -sS https://starship.rs/install.sh | sh

# Install Zsh plugins if not already present
if [ ! -d "$HOME/.zsh/zsh-autosuggestions" ]; then
    git clone https://github.com/zsh-users/zsh-autosuggestions "$HOME/.zsh/zsh-autosuggestions"
fi

if [ ! -d "$HOME/.zsh/zsh-syntax-highlighting" ]; then
    git clone https://github.com/zsh-users/zsh-syntax-highlighting.git "$HOME/.zsh/zsh-syntax-highlighting"
fi

echo "Zsh installation and configuration completed."

